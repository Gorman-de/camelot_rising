if(!campaignTrail_temp.loaded1){
campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.07,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 30,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 4,
        "fields": {
            "year": 1968,
            "display_year": "1972",
            "summary": "The calamities inflicted upon the American people could not triumph over their spirit. The summer of '68, the violence against troops in Vietnam, the mismanagement of Johnson all threatened to extinguish the fire of America's passions, to condemn the nation to a moribund status quo. One man knew that embers of liberal optimism still burned beneath the rot. One man believed that America's children need not be slain abroad while the homestead starved. That man was Robert Kennedy.<br><br>Unlike the nation's petty elites, Robert Kennedy heard what America‚Äîthe real America‚Äîcried out for. He understood that they had long-since been abandoned by a White House more invested in intra-party machinations than the burdens of war. Running for president, Kennedy dared to dream of a better tomorrow. He sided with love over hate, with peace over war. He would fight not for the few but We the People. And with his victory over the doubters, he demonstrated the American Dream could still triumph.<br><br>With miles to go before sleep, it is President Kennedy‚Äôs solemn duty to end the war and care for the forgotten America at home. He must do this while Republicans recuperate from their third loss in a row, a state that leaves them questioning their role in this reshaped America.<br><br>",
            "image_url": "https://i.imgur.com/xsrAxoZ.gif",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/OA4gegD.png",
            "recommended_reading": "<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
            "has_visits": 1,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]

document.getElementById("inner_window_1").children[0].innerHTML = `<h3>ùóßùóµùó∂ùóªùó¥ùòÄ ùóßùóµùóÆùòÅ ùó°ùó≤ùòÉùó≤ùóø ùó™ùó≤ùóøùó≤</h3>`

campaignTrail_temp.modBoxTheme = {
  "header_color": "#2D4443",
  "header_text_color": "#ffffff",
  "description_text_color": "#000000",
  "description_background_color": "#ffffff",
  "main_color": "#2D4443",
  "secondary_color": "#1F1D19",
  "ui_text_color": "#FFFFFF"
}

campaignTrail_temp.temp_election_list = [
    {
        "id": 4,
        "year": 1968,
        "is_premium": 0,
        "display_year": "1972e"
    }
]

campaignTrail_temp.credits = "<button onclick='credits()'>The ùêñ. Team</button>"

credits = function() {
  credits = ["todo"]
  text = "CREDITS:\n\n"
  for (i in credits) {
      text += credits[i] + "\n"
  }
  alert(text)
}

RecReading=true
e.altcolors=false
e.difficultychosen= 0

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 80,
        "fields": {
            "first_name": "Robert",
            "last_name": "Kennedy",
            "election": 4,
            "party": "Democratic",
            "state": "New York",
            "priority": 1,
            "description": "For much of his life, Robert Kennedy lurked in the shadows. While brother John ran for office on lofty goals and velvety words, it was Robert's iron fist keeping order behind the curtains. When Governor Wallace blocked the doors of Foster Auditorium, it was Bobby using threats and promises to defuse the rebellion down South. When men slew his brother in broad daylight, it was Bobby who kept the dynasty alive by becoming the junior senator of New York, then the recruited challenger to President Johnson, then finally president himself. Even now, enthroned in Washington in the harshest spotlight of them all, Bobby cannot help but feel trapped in the shadow of his brother's legacy and Johnson's war.<br><br>With an unconvincing victory in 1968 shattering any fanciful, liberal hopes of a \"return to normalcy,\" Bobby is thinking about returning to the shadows once more. Playing the role of the dark prince, President Kennedy hopes to bring his nation back from the brink of calamity while navigating a peaceful exit from Vietnam. He hopes to undo the convoluted welfare system of his hated predecessor and, once and for all, extinguish the flames of hate that still divide this troubled land.<br><br>",
            "color_hex": "#A0334C",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.imgur.com/ayD75hn.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 1002,
        "fields": {
            "first_name": "Russell",
            "last_name": "Long",
            "election": 4,
            "party": "Democratic",
            "state": "Louisiana",
            "priority": 1,
            "description": "<p></p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/tvFtYqe.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>Ever since he inherited the legacy of his fascist father, Russell Long has been a man without a place. Even after securing his seat in 1948 off of his daddy‚Äôs name and his uncle‚Äôs sleaze, the three-term Senator never quite met the expectations of his birthright or eventual title of Majority Whip. Irrelevant nationally by 1968, Long would only find his way on the ticket on the whim of one Robert F. Kennedy, who sought to use his name to split Wallace‚Äôs coalition down south. Naturally, Long would fail at providing even that. Kennedy would be elected, but without carrying a single state of the former Confederacy. <br><br>Now in the Naval Observatory, Long is once again a bit player in a realm of titans. With his power in the Senate already waning even before his selection, Long must find a way to either make himself necessary or convince President Kennedy‚Äîand himself‚Äîthat he is so.</p>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 81,
        "fields": {
            "first_name": "The",
            "last_name": "The Republicans",
            "election": 4,
            "party": "Republican",
            "state": "Hell",
            "priority": 1,
            "description": "pedophiles probably<br><br>",
            "color_hex": "#3f6989",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 82,
        "fields": {
            "first_name": "",
            "last_name": "Bumpkin",
            "election": 4,
            "party": "Outrage",
            "state": "Idaho",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#75715e",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 83,
        "fields": {
            "first_name": "",
            "last_name": "Faries",
            "election": 4,
            "party": "Peace and Love",
            "state": "Idaho",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#c5dca0",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 109261,
        "fields": {
            "candidate": 80,
            "running_mate": 1002
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 4,
        "candidates": [
            80,
            81,
            82,
            83
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 4,
        "candidates": [
            80,
            81,
            82,
            83
        ]
    }
]

jet_data = {
    "headerColor": "#2d4443",
    "windowColor": "#e2dedc",
    "containerColor": "#2d4443",
    "innerWindowColor": "#dfdfd9",
    "bannerImageUrl": "https://imgur.com/Vzxjx7V",
    "backgroundImageUrl": "https://imgur.com/CH5WNG0",
    "endingTextColor": "#000000",
    "gameTitle": "Things That Never Were"
}

//#startcode

const containers = document.querySelectorAll('.container');
containers.forEach(function(container) {
    container.style.border = '1px solid #C9C9C9';  
});
const gameWindow = document.getElementById('game_window');
if (gameWindow) {
  gameWindow.style.border = '1px solid #C9C9C9';  
}

$("#dynamic-favicon").attr("href","https://i.imgur.com/mR2eKr1.png");
corrr = `<div style="font-size: 8px; font-family: monospace; color: white;">
    </div>
    `;
nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#2d4443";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#2D4443";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;
$("#game_window")[0].style.backgroundImage = "url(https://i.imgur.com/39bg8Op.png)"

$(".container")[0].style.backgroundColor = "#1F1D19";

document.body.background = "https://i.imgur.com/lRtDE0o.png";

document.getElementById("header").src = "https://i.imgur.com/o3dxdIc.png";

document.body.background = "https://i.imgur.com/AW3OKHP.png";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#dfdfd9!important;}</style>";

                
let changesInProgress = false;

// Define the MutationObserver
let masterObserver = new MutationObserver(masterFunction);


// Master function
function masterFunction() {
    if (changesInProgress) return;
    changesInProgress = true;
    masterObserver.disconnect();


    changesInProgress = false;
    masterObserver.observe(document.body, { childList: true, subtree: true });
}

masterObserver.observe(document.body, { childList: true, subtree: true });

function applyColorStyles() {
    let wordsToFind = ['Advisor Mode?','Change Election Night?', 'Select coalition difficulty:', 'Please select the election you will run in:', 'This scenario was made by', 'Please select your party:', 'Please select your candidate:', 'How would you like the seats to be allocated?', 'Select campaign difficulty:', 'Enable tooltips?'];

    walkAndReplace(document.body, wordsToFind);
}

const bodyElement = document.body;

async function appendStyle() {
    var metaTag=document.createElement('meta');
    metaTag.name = "viewport";
    metaTag.content = "width=device-width, initial-scale=1";
    document.getElementsByTagName('head')[0].appendChild(metaTag);

    if (!document.querySelector('#radio-option-style')) {
        let style = document.createElement('style');
        style.type = 'text/css';
        style.id = 'radio-option-style';
        style.innerHTML = `
        #question_form   {
            font-family: Arial, "Helvetica Neue", Helvetica, sans-serif!important;
            font-size:1.12em!important;
            line-height: 1;
        }
        #question_form form[name="question"] input[type="radio"][name="game_answers"] {
            //accent-color: #4CAF50;
            margin-left: -6px; /* Adjust this value to move the button left */
        }
        // #question_form .radio-group input[type="radio"] {
        //     margin-left: -30px; /* Adjust this value to move the button left */
        // }
        #question_form form[name="question"] label {
            display: inline-block;
            vertical-align: top;
            max-width: 97%; /* Limit the label width so it wraps at an appropriate length */
            margin-bottom: 7px;
        }
        .inner_inner_window {
        display: flex;
        flex-direction: column;
        }
        .inner_inner_window h3{
            padding: 5px;
        }
        
        .campaign_trail_start_emphasis {
          background-color: #F8F8F8;
        }

        #candidate_pic,
        #running_mate_pic,
        .inner_window_sign_display {
            height: 14em;
        }
        #candidate_pic {
            margin-left: 159px;
        }
        #running_mate_pic {
            margin-right: 159px;
        }
        .inner_window_sign_display {
            width: 27%;
        }
        #visit_window {
            height: auto;
        }
        #visit_content {
            height: 79%;
        }

        #map_container {
          height: 30.78em
        }
        .description_window_small{
            height: 50%;
        }
        #map_footer{
            margin-top: auto !important;
        }

        #overall_details_container{
                height: 98%;
                overflow: auto;
        }

        #overall_result,
        #final_results_description,
        #election_summary{
            overflow: auto;
            overflow-x:hidden;
        }
        .overlay_window_content h3 {
            background-color: #DBD0D0;
        }
        .inner_inner_window h3 {
            background-color: #DBD0D0;
        }
        .inner_window_question h3 .mytooltip{
            background-color: lightskyblue;
        }

    .tooltip {
        position: absolute;
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.3s ease, visibility 0s 0.3s;
        pointer-events: none;
    }

    .tooltip-container:hover .tooltip {
        pointer-events: auto; /* Allow interaction on hover */
        transition-delay: 0s; /* Remove the delay when showing */
        background-color: #201F1A;
        background-Image: url("https://i.imgur.com/sjCE31d.png");
        background-size: cover;
        color: #C9C9C9;
        font-family: Arial, sans-serif !important;
        font-style: normal !important;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        text-align: left;
        line-height: 1.2;
    }

    .tooltip img {
        display: block;
        margin: 0 auto -13px;
        // border: 1px solid #C9C9C9;
    }

    .mytooltip .mytooltiptext {
        width: 240px;  /* Adjust as needed */
        text-shadow: none;
        color: black;
        text-align: center;
        border-radius: 6px;
        padding: 10px;
        position: absolute;
        z-index: 99;
        bottom: 20%;
        left: 20%;
        margin-left: -90px;
        opacity: 0;
        transition: opacity 0.3s;
        border: 1px solid black;
        pointer-events: none;
        font-size:13px !important;
        line-height:1.5em !important;
        font-weight:normal !important;
        font-style: normal !important;
    }

    .mytooltip .mytooltiptext img {
        max-width: 240px;
        height: auto;
    }

    .mytooltip:hover .mytooltiptext {
        opacity: 1;
        transition-delay: 0.5s;
    }

    .mytooltip:hover .bubble {
    opacity: 1;
    transition-delay: 0.5s;
    }
    .bubble {
    position: absolute;
    text-shadow: none;
    width: 250px;
    background: #fff;
    border-radius: 40px;
    padding: 24px;
    text-align: center;
    color: #000;
    opacity: 0;
    z-index: 99;
    bottom: 150%;  /* Shifted up further */
    left: -60px;  /* Shifted left more */
    margin-bottom: 10px;
    border: 1px solid black;
    pointer-events: none;
    }

    .bubble-bottom-left:before, .bubble-bottom-left:after {
    content: "";
    width: 0px;
    height: 0px;
    position: absolute;
    pointer-events: none;
    left: 62px;  /* Adjusted positioning */
    bottom: -28px;  /* Adjusted positioning */
    }

    .bubble-bottom-left:after {
    border-left: 35px solid black;
    border-right: 1px solid transparent;
    border-top: 1px solid transparent;
    border-bottom: 28px solid transparent;
    }

    .bubble-bottom-left:before {
    border-left: 24px solid #fff;
    border-right: 12px solid transparent;
    border-top: 12px solid #fff;
    border-bottom: 20px solid transparent;
    left: 63px;  /* Slight adjustment to position over the black triangle */
    bottom: -27px;  /* Slight adjustment to position over the black triangle */
    z-index: 100;  /* Make sure this is above the black triangle */
    }

    .mytooltip:hover .bubble-bottom-left:before,
    .mytooltip:hover .bubble-bottom-left:after {
    opacity: 1;
    }
    #election_image img {
    float: left;
    height:214px;
    width:300px;
    margin-right: 10px; /* To give some space between the image and the text */
    margin-bottom: -10px; /* To ensure there's space between the image and any content below */
    }

    #election_summary{
    overflow: visible;
    overflow-x:visible;
    margin-left: 5px;
    height: auto;
    }

    #inner_window_2,
    #inner_window_3{

    height:auto;
    }
    #recommended_reading_box{
    height: 80%;
    overflow: auto;
    }
    .person_button{
    margin-top:0.2em
    }
        @media only screen and (max-width: 768px) {
            .inner_window_question,
            #results_container,
            #overall_details_container,
            #main_content_area_reading,
            #inner_window_2,
            #inner_window_3,
            #inner_window_4,
            #advisors{
                font-size: 1.8em;
            }#inner_window_2,
            #inner_window_3{

                height:82%;
            }
            .inner_window_question{
              max-height:395px;
            }
            #headquarter{
            overflow:auto;
            font-size:1.5em;
            }
            #inner_window_2 select,
                #inner_window_3 select,
                #inner_window_4 select {
                    font-size: 1em;
                    padding: 10px;
                }

                #inner_window_2 button,
                #inner_window_3 button,
                #inner_window_4 button,
                #game_window button,
                #headquarter button,
                #advisorsDiv button{
                    font-size: 1em;
                    line-height: 2em;
                }

            #inner_window_2,
            #inner_window_3,
            #inner_window_4{
                overflow:auto;
            }
            #opponent_selection_description_window,
            #election_year_form,
            #candidate_description_window,
            #running_mate_description_window,
            #opponent_selection_description_window{
                height: auto;
                overflow: visible;
                line-height: 1 !important; /* Adjust the number to your desired line height */
            }
            .person_summary#running_mate_summary p {
                line-height: 1 !important; /* Adjust the number to your desired line height */
            }
            #title_container{
              font-size:1.2em
            }
            #visit_window {
                font-size: 1.8em;
                width: 90%;
                left:5%;
            }
            .mobile-hide {
                display: none;
            }
            #drop_down_area_state {
                margin-left: auto;
                margin-right: auto;
            }
        }

        .tooltip-container {
          opacity: 1;
          transition-delay: 0.5s;
          border-bottom: 1px dotted blue;
        }
        
        .tooltip {
            position: absolute;
            background-color: #333;
            color: #fff;
            padding: 8px;
            border-radius: 6px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1;
            max-width: 200px;
            text-align: center;
            left: 61%;
            top: 4%;
            transform: translate(-50px, 0px);
        }
        
        .tooltip img {
            max-width: 50%;
        }

        .rounded-box {
            display: flex;
            flex-direction: column;
            justify-content: center;
            border: 2px solid black;
            margin: 10px;
            background-color: white;
            border-radius: 4px;
            overflow: hidden;
        }

        #achievement-box {
          position: fixed;
          bottom: 20px;
          right: 20px;
          background-color: #4CAF50;
          color: white;
          padding: 15px 30px;
          border-radius: 8px;
          font-size: 18px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
          opacity: 0;
          transition: opacity 1s ease-in-out;
          z-index: 1000;
        }

        #achievement-box.visible {
          opacity: 1;
        }

        .hidden {
          display: none;
        }

        `;
        
        document.head.appendChild(style);
    }
}
appendStyle();

var invisibleElement = document.createElement('div');
invisibleElement.style.display = 'none';
invisibleElement.id = 'my-invisible-element';
document.body.appendChild(invisibleElement);

            
e = campaignTrail_temp

const startScreenUpdater = setInterval(function() {
    const initialButton = document.getElementById("election_id_button");
    const runningMateButton = document.getElementById("running_mate_id_button");
    const candidateButton = document.getElementById("candidate_id_button");
    const finalScreenBB = document.getElementById("opponent_selection_id_back");
    const difficultySelect = document.getElementById("difficulty_level_id");
    const finalScreenID = document.getElementById("opponent_selection_id_button");
    const modeSelection = document.getElementById("opponent_selection_description_window");
    const window = document.getElementById("inner_window_4");
      
    if(initialButton) { // reset theme at main menu
        document.getElementById("header").src = "https://i.imgur.com/o3dxdIc.png";
    }
    
    if(candidateButton) { // change theme on candidate viewing
    document.forms["candidate"].querySelector("h3").textContent = "Please select your character:"
        var c = document.getElementById("candidate_id").value;
        
    
    }
    if(finalScreenID) { // delete back button and delete the interval
        finalScreenBB.remove();
        const dropdown = document.getElementById("difficulty_level_id");

    dropdown.addEventListener("input", () => {
        e.difficultychosen = dropdown.value;
    });

        clearInterval(startScreenUpdater);
    }
}, 1);



const callback = (mutationList, observer) => {
    visitWindow = document.getElementsByClassName("overlay_window")[0];

    if(visitWindow == null || visitWindow.classList.contains("done")) {
        return;
    }
    visitWindow.classList.add("done");
    visitWindow.classList.add("window");
    let titleBar = visitWindow.querySelector("h3");
    titleBar.classList.add("title-bar");
    titleBar.classList.add("title-bar-text")
    titleBar.style.paddingLeft = "3px";
};

class Song {
  constructor(title, artist, coverLink, audioLink) {
    this.title = title;
    this.artist = artist;
    this.coverLink = coverLink;
    this.audioLink = audioLink;
  }
  getTitle() {
    return this.title;
  }

  getArtist() {
    return this.artist;
  }

  getCoverLink() {
    return this.coverLink;
  }

  getAudioLink() {
    return this.audioLink;
  }
}

class Playlist {
  constructor() {
    this.songs = [];
    this.currentSongIndex = 0;
  }

  addSong(song) {
    this.songs.push(song);
  }

  getCurrentSong() {
    return this.songs[this.currentSongIndex];
  }

  playNext() {
    this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length;
  }

  playPrevious() {
    this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length;
  }
}
window.Playlist=Playlist
window.Song=Song

function changePlaylist(newPlaylist) {
  playlist = newPlaylist;
  playlist.currentSongIndex = 0;
  updateUI(playlist);
  const audio = document.getElementById("audio");
  audio.src = playlist.getCurrentSong().audioLink;
  audio.play();
}
window.changePlaylist=changePlaylist

function updateUI(playlist) {
    const currentSong = playlist.getCurrentSong();
    var player = document.getElementById("player");
    player.querySelector("#cover").src = currentSong.getCoverLink();
    player.querySelector("#title").textContent = currentSong.getTitle();
    player.querySelector("#artist").textContent = currentSong.getArtist();
}

window.updateUI=updateUI

campaignTrail_temp.achievements = {
  "Cruelty<br>‚†Ä" : {
    "image" : "https://i.imgur.com/6uLOAFp.png",
    "description" : "Fall for this leak.",
    "cannotBeCheated" : true
  }
}

function setupMusicPlayer() {
  playlist = new Playlist();
  rfk_playlist = new Playlist();
  rep_playlist = new Playlist();

  const song1 = new Song(
    "Dean Jones",
    "Company",
    "https://i.imgur.com/4aRIys9.png",
    "https://audio.jukehost.co.uk/1MrAYcjHVGI1ldMQoLvEFkByR0qNtldI"
  );
  const song2 = new Song(
    "Paul McCartney",
    "Dear Boy",
    "https://i.imgur.com/cMRraQk.png",
    "https://audio.jukehost.co.uk/q0cOSZrx4PmRArgPt8k1xKzRELEnVySr"
  );

  const song3 = new Song(
    "Paul McCartney",
    "Uncle Albert/Admiral Halsey",
    "https://i.imgur.com/cMRraQk.png",
    "https://audio.jukehost.co.uk/q0cOSZrx4PmRArgPt8k1xKzRELEnVySr"
  );

  const song4 = new Song(
    "Al Green",
    "I'm Still in Love with You",
    "https://i.imgur.com/Pw9Jidu.png",
    "https://audio.jukehost.co.uk/q0cOSZrx4PmRArgPt8k1xKzRELEnVySr"
  );

  const song5 = new Song(
    "David Ruffin",
    "My Whole World Ended",
    "https://i.imgur.com/qVVtZuR.png",
    "https://audio.jukehost.co.uk/q0cOSZrx4PmRArgPt8k1xKzRELEnVySr"
  );

  const song6 = new Song(
    "The Moody Blues",
    "Nights In White Satin",
    "https://i.imgur.com/0FbXJ7e.png",
    "https://audio.jukehost.co.uk/q0cOSZrx4PmRArgPt8k1xKzRELEnVySr"
  );

    playlist.addSong(song1);
    playlist.addSong(song2);
    playlist.addSong(song3);
    playlist.addSong(song4);
    playlist.addSong(song5);
    playlist.addSong(song6);
 
    const playerContainer = document.createElement("div");
    playerContainer.id = "player";
 
   const displayBox = document.createElement("div");
  displayBox.id = "display-box";
 
  const coverElement = document.createElement("img");
  coverElement.id = "cover";
  displayBox.appendChild(coverElement);
  coverElement.style.marginLeft = "10px";
 
  const infoContainer = document.createElement("div");
  infoContainer.id = "info-container";
  infoContainer.style.color = "#B42D1B"; // Set text color to white
 
  const songInfo = document.createElement("div");
  songInfo.id = "song-info";
 
  const titleElement = document.createElement("h3");
  titleElement.id = "title";
  titleElement.style.fontFamily = "Arial, sans-serif";
  titleElement.style.fontSize = "18px";
  titleElement.style.fontWeight = 'bold';
  titleElement.style.marginBottom = "1px";
  songInfo.appendChild(titleElement);
 
  const artistElement = document.createElement("p");
  artistElement.id = "artist";
  artistElement.style.fontFamily = "Arial, sans-serif";
  artistElement.style.fontSize = "28px";
  artistElement.style.fontWeight = 'bold';
  artistElement.style.marginTop = "1px";
  songInfo.appendChild(artistElement);
 
  infoContainer.appendChild(songInfo);
  displayBox.appendChild(infoContainer);
 
  playerContainer.appendChild(displayBox);
 
  const controlsContainer = document.createElement("div");
  controlsContainer.id = "controls-container";
 
  const controls = document.createElement("div");
  controls.id = "controls";

  const progressBarContainer = document.createElement("div");
    progressBarContainer.id = "progress-bar-container";
 
    const progressBar = document.createElement("progress");
    progressBar.type = "range";
    progressBar.id = "progress-bar";
    progressBar.value = "0";
    progressBar.max = "100";
 
 
    progressBarContainer.appendChild(progressBar);
    controlsContainer.appendChild(progressBarContainer);
    playerContainer.appendChild(controlsContainer);

  const prevButton = document.createElement("img");
  prevButton.id = "prevButton";
  prevButton.src = "https://i.imgur.com/xMYtRDA.png";
  prevButton.alt = "Previous";
  prevButton.style.width = "38px";
  prevButton.style.height = "35px";
  prevButton.style.marginRight = "18px";
  //prevButton.style.marginTop = "10px";
  controls.appendChild(prevButton);
 
  const playPauseButton = document.createElement("img");
  playPauseButton.id = "playPauseButton";
  playPauseButton.src = "https://i.imgur.com/KRddgx9.png"; // Set the default play image
  playPauseButton.alt = "Play/Pause";
  playPauseButton.style.width = "57px";
  playPauseButton.style.height = "35px";
  controls.appendChild(playPauseButton);
 
  const nextButton = document.createElement("img");
  nextButton.id = "nextButton";
  nextButton.src = "https://i.imgur.com/4NPX2k5.png";
  nextButton.alt = "Next";
  nextButton.style.width = "38px";
  nextButton.style.height = "35px";
  nextButton.style.marginLeft = "18px";
  controls.appendChild(nextButton);
 
  controlsContainer.appendChild(controls);
 
  playPauseButton.addEventListener("click", function () {
    const audio = document.getElementById("audio");
    if (audio.paused) {
      audio.play();
      playPauseButton.src = ppBTN; // Set the pause image
    } else {
      audio.pause();
      playPauseButton.src = ppBTN_pause;
    }
  });
 
  nextButton.addEventListener("click", function () {
    playlist.playNext();
    updateUI(playlist);
    const audio = document.getElementById("audio");
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
  });
 
  prevButton.addEventListener("click", function () {
    playlist.playPrevious();
    updateUI(playlist);
    const audio = document.getElementById("audio");
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
  });
 
   const volumeContainer = document.createElement("div");
      volumeContainer.id = "volume-container";
 
      const volumeSliderContainer = document.createElement("div");
      volumeSliderContainer.classList.add("is-vertical");
      volumeSliderContainer.style.marginLeft = "0%"; // 23
      volumeSliderContainer.style.height = "0px"; // 126
 
      const volumeSlider = document.createElement("input");
      volumeSlider.type = "range";
      volumeSlider.id = "volumeSlider";
      volumeSlider.min = 0;
      volumeSlider.max = 9;
      volumeSlider.step = 1;
      volumeSlider.value = 1; // Initial volume
 
      volumeSliderContainer.appendChild(volumeSlider);
 
      const volumeDisplay = document.createElement("span");
      volumeDisplay.id = "volume-display";
      volumeDisplay.style.fontWeight = 'bold';
      volumeDisplay.style.display = 'none';
      volumeDisplay.textContent = "1";
 
      volumeContainer.appendChild(volumeSliderContainer);
      volumeContainer.appendChild(volumeDisplay);
    
      //playerContainer.appendChild(volumeContainer);
 
    gameWindow_player.insertAdjacentElement("afterend", playerContainer);
 
 
    function updateProgressBar() {
      const audio = document.getElementById("audio");
      const progress = (audio.currentTime / audio.duration) * 100;
      try{progressBar.value = progress}
      catch{}
    }
 
   
    progressBar.addEventListener("input", function () {
      const audio = document.getElementById("audio");
      const seekTime = (progressBar.value / 100) * audio.duration;
      audio.currentTime = seekTime;
    });
 
    const audio = document.createElement("audio");
    audio.id = "audio";
    audio.src = playlist.getCurrentSong().audioLink;
    audio.volume = 1/9;
 
    audio.addEventListener("timeupdate", updateProgressBar);
    audio.addEventListener("ended", function () {
        // Play the next song when the current song ends
        playlist.playNext();
        updateUI(playlist);
        audio.src = playlist.getCurrentSong().audioLink;
        audio.play();
      });
 
      let currentVolume = 1; // Initial volume
 
    //   volumeSlider.addEventListener("input", function () {
    //     currentVolume = parseInt(volumeSlider.value, 10);
    //     updateVolumeDisplay();
    //     updateAudioVolume();
    //   });
 
    //   function updateVolumeDisplay() {
    //     volumeDisplay.textContent = currentVolume;
    //   }
 
    //  function updateAudioVolume() {
    //   const audio = document.getElementById("audio");
    //   audio.volume = currentVolume / 9; // Set volume between 0 and 1
    // }
 
    document.body.appendChild(audio);
    audio.play();
 
    // Update the UI when the page loads
    updateUI(playlist);
  }
  function changePlayerStyle(bgImage, txtColor) {
      
      const progBar_BG = document.getElementById("progress-bar");
      const prevBTN_src = document.getElementById("prevButton");
      const ppBTN_src = document.getElementById("playPauseButton");
      const ffBTN_src = document.getElementById("nextButton");

      const playerElement = document.getElementById("player");
      playerElement.style.backgroundImage = `url("${bgImage}")`;
        
      const infoContainer = document.getElementById("info-container");
      infoContainer.style.color = txtColor;

      if(bgImage == "https://i.imgur.com/8SKzKLX.png"){

        progBar_BG.style.backgroundImage = `url("${"https://i.imgur.com/rnjhNUP.png"}")`;
        prevBTN_src.src = "https://i.imgur.com/ve5zlYr.png";
        ppBTN_src.src = "https://i.imgur.com/JvAtC7d.png";
        ffBTN_src.src = "https://i.imgur.com/AEr4q3y.png";

        ppBTN = "https://i.imgur.com/JvAtC7d.png";
        ppBTN_pause = "https://i.imgur.com/XbvsrNf.png";
      }
      else{
        
        progBar_BG.style.backgroundImage = `url("${"https://i.imgur.com/eFPTv7f.png"}")`;
        prevBTN_src.src = "https://i.imgur.com/JacXKcT.png";
        ppBTN_src.src = "https://i.imgur.com/KRddgx9.png";
        ffBTN_src.src = "https://i.imgur.com/btmG7j2.png";

        ppBTN = "https://i.imgur.com/KRddgx9.png";
        ppBTN_pause = "https://i.imgur.com/IO44pbG.png";
      }

  }

  var color = "#B42D1B";
  const style = document.createElement("style");
  style.textContent = `
  #player {
      border: 1px solid #C9C9C9; /* Add your desired border style */
      display: flex;
      flex-direction: row;
      height:191px;
      background-Image: url("https://i.imgur.com/nNt9E10.png");
    }
 
    #display-box {
      display: flex;
      align-items: center;
      width: 50%;
    }
 
    #cover {
      width: 176px;
      height:176px;
    }
 
    #info-container {
      display: flex;
      flex-direction: row;
      height:173px;
      width:800px;
      margin-top: 0px;
    }
    #info-container p {
      white-space: nowrap;
    }
    #info-container h3 {
      white-space: nowrap;
    }
    #controls-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 10px;
      width:100%;
      padding-top:15px;
    }
    #controls {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: row;
      margin-left: -298px;
      margin-top: 135px;
      width: 100%;
      gap: 0px
    }
    #progress-bar-container {
      height:18px;
      width:558px;
      margin-left: -230px;
      margin-Top: -45px;
      border-radius: 5px
    }
    
    #progress-bar {
      width: 100%;
      height: 100%;
      margin-left: -29px;
      margin-Top: 124px;
      appearance: none;
      background-image: url("https://i.imgur.com/eFPTv7f.png");
      border: none;
    }
 
    #song-info {
      margin-left: 117px;
      margin-top: 13px;
      width: 100%;
      padding:5px;
    }
    .is-vertical #volumeSlider {
      width: 125px;
    }

    #prevButton {
        width: auto;
        height: auto;
        max-width: none;
        max-height: none;
    }
    #progress-bar::-webkit-progress-bar {
        background-color: transparent; /* Background color of the progress bar */
    }
    #progress-bar::-webkit-progress-value {
        background-color: ${color}; /* Color of the progress value */
    }
    #progress-bar::-moz-progress-bar {
        background-color: ${color}; /* Color of the progress value */
    }
    #progress-bar::-ms-fill {
        background-color: ${color}; /* Color of the progress value */
    }
  `;
  document.head.appendChild(style);
 
  const gameWindow_player = document.getElementById("game_window");
  //use this function directly or put it in an event listener to start the music on the press of a certain button
  setupMusicPlayer();
  changePlaylist(playlist);
  changePlayerStyle("https://i.imgur.com/nNt9E10.png", "#B42D1B");
  }
  var changeGameDisp = (hide) => {
    disp = "";
    if (hide) {
      disp = "none";
    }
    document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
  };
